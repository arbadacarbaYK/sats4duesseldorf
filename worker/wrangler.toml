# Cloudflare Worker configuration for sats4berlin
# Handles Tally form submissions and creates GitHub issues

name = "sats4berlin-form-handler"
main = "src/index.js"
compatibility_date = "2024-01-01"

# KV Namespace for storing private contact details
# Create with: wrangler kv:namespace create "PRIVATE_DATA"
[[kv_namespaces]]
binding = "PRIVATE_DATA"
id = "TO_BE_FILLED_AFTER_CREATION"

# Environment variables (set via wrangler secret put)
# Required secrets:
# - GITHUB_TOKEN: Personal access token with repo scope
# - ADMIN_API_TOKEN: Token for accessing admin endpoints (retrieving contact info)

[vars]
GITHUB_OWNER = "satoshiinberlin"
GITHUB_REPO = "sats4berlin"

# For production, you can add route patterns:
# routes = [
#   { pattern = "forms.sats4berlin.de/*", zone_name = "sats4berlin.de" }
# ]
